<div class="container">
  <h1 class="modal-title w-100 text-center pb-3 mt-4">Crear Orden</h1>
  <div class="row">
    <div  class="col-12 mb-3">
      <div class="card shadow"  [ngStyle]="{'background-color': parcelaSeleccionada ? 'rgba(0, 66, 21, 0.08)' : '#ffffff', 'border': !parcelaSeleccionada ? '3px solid green': '0px'}" (click)="abrirModalParcela()" style="cursor: pointer;">
        <div class="card-body parcelas ">
          <div class="card-title d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center">
              <img src="/Parcela-Icon1.svg" alt="Parcela Icon" class="img-fluid me-2" />
              <h2 class="fw-bold ms-3 mt-2">Parcela</h2>
            </div>
            <h3 class="mb-0" [ngClass]="{'fw-bold': parcelaSeleccionada}">{{ parcelaSeleccionada?.nombre}}</h3>
          </div>
          <app-modal-crear-parcela #modalVerParcelas (parcelaGuardada)="recibirParcela($event)"></app-modal-crear-parcela>
        </div>
      </div>
    </div>

    <div class="col-12 mb-3" [ngStyle]="{'background-color': !parcelaSeleccionada ? 'rgba(0, 66, 21, 0.08)' : '#ffffff', 'opacity': !parcelaSeleccionada ? '0.5' : '1','pointer-events': !parcelaSeleccionada ? 'none' : 'auto'}">
     <div class="card shadow" [ngStyle]="{'background-color' :tareaSeleccionada  ? 'rgba(0, 66, 21, 0.08)' : '#ffffff', 'border': parcelaSeleccionada && !tareaSeleccionada ? '3px solid green': '0px'}" (click)="abrirModalTarea()" style="cursor: pointer;">
        <div class="card-body tareas">
          <div class="card-title d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center">
              <img src="/Tarea-Icon.svg" alt="Tarea Icon" class="img-fluid me-2" />
              <h2 class="fw-bold ms-3 mt-2" id="element">Tarea</h2>
            </div>
            <h3 class="mb-0" [ngClass]="{'fw-bold': tareaSeleccionada}">{{tareaSeleccionada}}</h3>
          </div>
          <app-modal-crear-tarea #modalVerTarea (tareaGuardada)="recibirTarea($event)"></app-modal-crear-tarea>
        </div>
      </div>
    </div>

    <div class="col-12 mb-3" [ngStyle]="{'background-color': !tareaSeleccionada ? 'rgba(0, 66, 21, 0.08)' : '#ffffff','opacity': !tareaSeleccionada ? '0.5' : '1','pointer-events': !tareaSeleccionada ? 'none' : 'auto'}">
    <div class="card shadow"  [ngStyle]="{'background-color': aplicadoresSeleccionados ? 'rgba(0, 66, 21, 0.08)' : '#ffffff','border': tareaSeleccionada && !aplicadoresSeleccionados ? '3px solid green': '0px'}" (click)="abrirModalAplicador()" style="cursor: pointer;">
    <div class="card-body aplicadores">
      <div class="card-title d-flex justify-content-between align-items-center">
        <div class="d-flex align-items-center">
          <img src="/Persona-Icon.svg" alt="Aplicador img" class="img-fluid me-2" />
          <h2 class="fw-bold ms-3 mt-2">Aplicador</h2>
        </div>
        @if (aplicadoresSeleccionados != null || aplicadoresSeleccionados) {
          <div class="d-flex flex-column">
          @for (aplicador of aplicadoresSeleccionados; track aplicador.id) {
            <h3 class="mb-0" [ngClass]="{'fw-bold': aplicador.nombre}">{{aplicador.nombre}}</h3>
          }
          </div>
        }

      </div>
      <app-modal-crear-aplicador #modalVerAplicador (aplicadoresGuardados)="recibirAplicador($event)"></app-modal-crear-aplicador>
    </div>
  </div>
</div>

<div class="col-12 mb-3" [ngStyle]="{'background-color': !aplicadoresSeleccionados ? 'rgba(0, 66, 21, 0.08)' : '#ffffff','opacity': !aplicadoresSeleccionados ? '0.5' : '1','pointer-events': !aplicadoresSeleccionados ? 'none' : 'auto'}">
  <div class="card shadow"  [ngStyle]="{'background-color': maquinaSeleccionada ? 'rgba(0, 66, 21, 0.08)' : '#ffffff','border': aplicadoresSeleccionados && !maquinaSeleccionada ? '3px solid green': '0px'}" (click)="abrirModalMaquina()" style="cursor: pointer;">
    <div class="card-body maquinas">
      <div class="card-title d-flex justify-content-between align-items-center">
        <div class="d-flex align-items-center">
          <img src="/Maquina-Icon.svg" alt="Máquina img" class="img-fluid me-2" />
          <h2 class="fw-bold ms-3 mt-2">Máquina</h2>
        </div>
        <h3 class="mb-0" [ngClass]="{'fw-bold': maquinaSeleccionada?.nombre}">{{maquinaSeleccionada?.nombre}}</h3>      </div>
      <app-modal-crear-maquina #modalVerMaquina (maquinaGuardada)="recibirMaquina($event)"></app-modal-crear-maquina>
    </div>
  </div>
</div>

<div class="col-12 mb-3" [ngStyle]="{'background-color': !maquinaSeleccionada ? 'rgba(0, 66, 21, 0.08)' : '#ffffff','opacity': !maquinaSeleccionada ? '0.5' : '1','pointer-events': !maquinaSeleccionada ? 'none' : 'auto'}">
  <div class="card shadow"  [ngStyle]="{'background-color': tratamientoSeleccionado ? 'rgba(0, 66, 21, 0.08)' : '#ffffff','border': maquinaSeleccionada && !tratamientoSeleccionado? '3px solid green': '0px'}" (click)="abrirModalTratamiento()" style="cursor: pointer;">
      <div class="card-body tratamientos">
        <div class="card-title d-flex justify-content-between align-items-center">
          <div class="d-flex align-items-center">
            <img src="/Tratamiento-Icon.svg" alt="Tratamiento Icon" class="img-fluid me-2" />
            <h2 class="fw-bold ms-3 mt-2">Tratamiento</h2>
          </div>
          <h3 class="mb-0" [ngClass]="{'fw-bold': tratamientoSeleccionado?.nombre}">{{tratamientoSeleccionado?.nombre}}</h3>
        </div>
        <app-modal-crear-tratamiento #modalVerTratamiento (tratamientoGuardado)="recibirTratamiento($event)"></app-modal-crear-tratamiento>
      </div>
    </div>
  </div>

  <div class="col-12 mb-3" [ngStyle]="{'background-color': !tratamientoSeleccionado ? 'rgba(0, 66, 21, 0.08)' : '#ffffff','opacity': !tratamientoSeleccionado ? '0.5' : '1','pointer-events': !tratamientoSeleccionado ? 'none' : 'auto'}">
    <div class="card shadow"  [ngStyle]="{'background-color': fechaSeleccionada ? 'rgba(0, 66, 21, 0.08)' : '#ffffff','border': tratamientoSeleccionado && !fechaSeleccionada ? '3px solid green': '0px'}" (click)="abrirModalFecha() " style="cursor: pointer;">
      <div class="card-body fecha">
        <div class="card-title d-flex justify-content-between align-items-center">
          <div class="d-flex align-items-center">
          <img src="/Fecha-Icon.svg" alt="Fecha Icon" class="img-fluid me-2" />
          <h2 class="fw-bold ms-3 mt-2"> Fecha</h2>
          </div>
          <div class="d-flex align-items-center">
          <h3 class="mb-0" [ngClass]="{'fw-bold': fechaSeleccionada}">{{fechaSeleccionada}}</h3>
        </div>
        <app-modal-crear-fecha #modalVerFecha (fechaGuardada)="recibirFechaYHora($event)"></app-modal-crear-fecha>
      </div>
    </div>
  </div>
</div>
<div class="pb-5" (click)="guardarDatos()">
  <div class="d-flex justify-content-center">
    <button class="btn btn-primary mt-3">Guardar Cambios</button>
  </div>
</div>
<div class="modal fade" id="creadaTarea" tabindex="-1" aria-labelledby="creadaTareaLabel">
  <div class="alert alert-success" [class.show]="ventanaVisible">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-body">
          ✅ Tarea creada con éxito.
        </div>
      </div>
    </div>
  </div>
</div>
